

LIVELLO 7: Fiamme dal passato

DIALOGO INIZIALE
Ortiz
Come sta il mio prigioniero preferito?
Simeoni
Risparmia l'umorismo, Ortiz.
Ortiz
Generale Ortiz. Almeno per oggi.
Simeoni
Che significa?
Ortiz
Significa che per mantenere la mia bella faccia pulita da ogni sospetto, devo tirarti fuori da questa prigione, per oggi. Abbiamo bisogno di un tecnico informatico e, a detta dei miei uomini, sei il migliore.
Simeoni
E perché dovrei farlo? Non ti devo nulla. Anzi, mi hai sbattuto in galera e hai tradit...
Ortiz
Taci! Devi farlo, fidati. Non vorrai che qualche vecchio inserviente scivoli durante la pulizia di un corridoio e si faccia male, spero. Inoltre c'è quella faccenda del tuo tradimento...
Simeoni
Maledetto! Sono costretto ad ascoltarti.
Ortiz
Seguimi.
Simeoni
...
Zurlin
Ciao caro.
Simeoni
Cosa dobbiamo fare? Un nuovo attacco ai loro sistemi informatici?
Ortiz
Magari. Purtroppo dopo l'ultima volta hanno alzato il livello di sicurezza. Non sappiamo più come entrare. In ogni caso, Zurlin ha trovato una cosa.
Zurlin
Il Nemico aveva sviluppato un nuovo tipo di missili, top secret.
Ortiz
... e abbiamo intercettato una loro conversazione. Stanno per utilizzarli.
Zurlin
Sono composti da una particolare testata in grado di sdoppiarsi. Sono riuscita a... ricordarmi come fossero fatti. Dobbiamo implementare questa tecnologia nelle torrette dell'UTF-8.
Simeoni
Va bene, cominciamo.

OBIETTIVO - Tab 2
Ci sono due classi:
- MissileTestataMultipla: missile alieno che si sdoppia;
- MissileStandard: missile di ordinanza terrestre.
L'obiettivo è inserire la tecnologia aliena dello sdoppiamento dei missili nella nostra classe MissileStandard.
Come si può notare, le due classi hanno una struttura comune: tra di esse l'unica differenza sta nei nomi delle caratteristiche e delle  funzioni.
Per spostare la tecnologia dalla classe MissileTestataMultipla è necessario comprendere in quale punto della classe MissileStandard devono essere collocate le funzionalità di sdoppiamento, tenendo conto della somiglianza tra le due classi e dei nomi diversi.
AIUTI
Come prima cosa è necessario modificare la funzione MissileStandard.prototype.miraBersaglio(), coerentemente con la funzione MissileTestataMultipla.prototype.identificaObiettivo(): al posto delle righe
var coordinateEsplosione = { esplosioneX: x, esplosioneY: y };
this.agganciaObiettivo( bersaglio );
return coordinateEsplosione.esplosioneY;
andranno inserite le seguenti righe, che permettono di calcolare l'altezza di sdoppiamento del missile
var altezza = this.calcolaAltezzaSdoppiamento( x, y );
this.agganciaObiettivo( bersaglio );
return altezza;
Successivamente sarà necessario modificare la funzione MissileStandard.prototype.esplodi(), coerentemente con la funzione MissileTestataMultipla.prototype.detonazione(), cambiando dunque le righe
var x = this.bersaglioAgganciato.x;
var y = this.bersaglioAgganciato.y;
return ( [ new FrammentoMissile( x, y ) ] );
con le righe
var frammentoMissile1 = new FrammentoMissile( this.bersaglio.x + 10, this.bersaglio.y );
var frammentoMissile2 = new FrammentoMissile( this.bersaglio.x - 10, this.bersaglio.y );
var frammentiMissile = [];
frammentiMissile.push( frammentoMissile1 );
frammentiMissile.push( frammentoMissile2 );
return frammentiMissile;

MANUALE
Ogni classe può essere associata ad una serie di funzioni. Per essere più chiari, prendiamo la classe Arma:
function Arma () {
	this.numeroMunizioni = 10;
}
Un'arma può avere diverse funzionalità, per esempio la ricarica e lo sparo:
Arma.prototype.ricarica = function () {
	this.numeroMunizioni = 10;
}
Arma.prototype.spara = function () {
	if ( this.numeroMunizioni === 0 ) {
		this.ricarica();
	}
	this.numeroMunizioni--;
}
Queste due funzioni sono molto semplici. La prima re-imposta il numero di munizioni al valore iniziale di 10. La seconda controlla il numero di munizioni: se è uguale a 0, allora effettua una ricarica, poi spara; altrimenti spara, decrementando il numero di munizioni.
Una funzione propria ad una classe viene indicata con la parola chiave prototype.
Osserviamo il meccanismo, prendendo un oggetto di classe Arma:
var cannone = new Arma();
cannone.spara();
var munizioniRimaste = cannone.numeroMunizioni.
La variabile munizioniRimaste contiene il valore 9, poiché la funzione di sparo ha determinato un decremento del numeroMunizioni all'interno dell'oggetto cannone.

DIALOGO FINALE
Ortiz
Riportatelo in cella.
Simeoni
...
Prosdocimo
Se ne sono andati tutti?
Simeoni
Prosdocimo! Devi stare attento, è pieno di telecamere.
Prosdocimo
Lo so. Ma mentre pulivo la sala di controllo, potrebbe essermi scivolato del detersivo per pavimenti sulle prese delle telecamere, eh eh eh...
Simeoni
Ah ah ah! Sei un diavolo, Prosdocimo.
Prosdocimo
Eh eh eh. Sono qua per mantenere una promessa. Forse il tempo che mi rimane in questa base è agli sgoccioli...
Simeoni
Non essere pessimista, Prosdocimo.
Prosdocimo
Sono realista, eh eh eh. Comunque, è ora che tu sappia chi sono io.
Simeoni
Sei sicuro di volermelo dire?
Prosdocimo
Sei un bravo ragazzo, Simeoni. Mi ricordi tanto un giovane tecnico giunto su Bastiani tanti anni fa. All'epoca avevo vent'anni, appena uscito dalla Scuola degli ufficiali tecnici.
Simeoni
Scuola degli ufficiali tecnici? Mai sentita.
Prosdocimo
Ovviamente. Non esiste più, è stata cancellata pochi anni dopo. Comunque, appena arrivato qui feci la conoscenza di Rusa, un anziano programmatore che lavorava qua. Al tempo ero già un ficcanaso, eh eh eh. Rusa mi insegnò un linguaggio ormai perduto.
Simeoni
Il JS?
Prosdocimo
Ovviamente. Per questo so diverse cose e odio Ortiz eh eh eh.
Simeoni
Cosa sai dirmi di lui?
Prosdocimo
Ero già qua quando è arrivato. Un giovane brillante e scavezzacollo. Tornò da una missione segreta, che prevedeva il primo atterraggio umano al di là del deserto... tornò solo lui. Raccontò di un massacro degli uomini da parte di una razza aliena e che lui era l'unico sopravvissuto. Si prese una medaglia e una promozione. Da quel giorno non fu più lo stesso però... Ortiz nasconde un segreto, ed intendo scoprirlo.
Simeoni
Forse posso aiutarti. È in combutta con gli Ibridi.
Prosdocimo
Allora la leggenda è vera... eh eh eh. Speravo di vivere abbastanza a lungo per accertarmene.
Simeoni
Arriva qualcuno! Vattene, Prosdocimo!
Prosdocimo
Eh eh eh, non preoccuparti, ora me ne vado. Ma ne vdremo delle belle, mio giovane amico. Eh eh eh...